{
  "info": {
    "_postman_id": "3594da9a-38a9-47bb-8c67-f812a9ba9a6c",
    "name": "Find Best Restaurants APIs",
    "description": "# About this collection\n\nPostman allows you to test your APIs using simple Javascript code. You can evaluate your response body, headers, cookies, and more using the [ChaiJS BDD](https://www.chaijs.com/api/bdd/) syntax.\n\nThis collection guides you through the process of setting up an integration test to ensure that all individual components of an API function together seamlessly.\n\nThe API under test in this collection includes three endpoints for registering and receiving a token, accessing your unique generated name, and unregistering a token:\n\n- POST `/register`\n- POST `/unregister`\n- GET `/my-name`\n    \n\nBy setting up requests in the order of the operation, we can test the flow of data to and from the endpoints and ensure they work together as expected. We also verify that the data persists between requests on the back end.\n\n## **Using this collection**\n\n**Step 1:** Check out the requests' documentation to learn more about -\n\n- what each request is meant to do.\n- the tests we've added against each one.\n    \n\n**Step 2:** Run this collection by clicking on \"Run\".\n\n<img src=\"https://content.pstmn.io/84019b0f-69c8-4c5f-98b9-2c90a6f9a0b1/Y29sbGVjdGlvbi1ydW5uZXItYnV0dG9uLmpwZWc=\" width=\"266\" height=\"103\">\n\n**Step 3:** To customize this collection, replace the request URLs with your API endpoints and add or edit the tests if needed.\n\n## Resources\n\n[Scripting in Postman](https://learning.postman.com/docs/writing-scripts/intro-to-scripts/)\n\n[Test script examples](https://learning.postman.com/docs/writing-scripts/script-references/test-examples/)\n\n[Postman Sandbox API reference](https://learning.postman.com/docs/sending-requests/grpc/postman-sandbox-api/#writing-assertions)\n\n[Using the Collection Runner](https://learning.postman.com/docs/collections/running-collections/intro-to-collection-runs/)",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "13485390"
  },
  "item": [
    {
      "name": "Price with Partial CuisineName",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Sorted by distance, rating, price, name\", () => {",
              "    for (let i = 1; i < data.length; i++) {",
              "        const prev = data[i - 1];",
              "        const curr = data[i];",
              "",
              "        if (prev.distance !== curr.distance) {",
              "            pm.expect(curr.distance).to.be.at.least(prev.distance);",
              "        } ",
              "        else if (prev.customerRating !== curr.customerRating) {",
              "            pm.expect(curr.customerRating).to.be.at.most(prev.customerRating);",
              "        } ",
              "        else if (prev.priceSinglePersonSpent !== curr.priceSinglePersonSpent) {",
              "            pm.expect(curr.priceSinglePersonSpent).to.be.at.least(prev.priceSinglePersonSpent);",
              "        } ",
              "        else {",
              "            pm.expect(curr.restaurantName.localeCompare(prev.restaurantName))",
              "              .to.be.at.least(0);",
              "        }",
              "    }",
              "});",
              "",
              "pm.test(\"Each item has required fields\", () => {",
              "    const data = pm.response.json();",
              "",
              "    data.forEach(r => {",
              "        pm.expect(r).to.have.property(\"restaurantName\");",
              "        pm.expect(r).to.have.property(\"cuisineName\");",
              "        pm.expect(r).to.have.property(\"priceSinglePersonSpent\");",
              "        pm.expect(r).to.have.property(\"customerRating\");",
              "        pm.expect(r).to.have.property(\"distance\");",
              "    });",
              "});",
              "",
              "",
              "",
              "",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "method": "GET",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/api/restaurants?cuisineName=Ital&price=10",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "cuisineName",
              "value": "Ital"
            },
            {
              "key": "price",
              "value": "10"
            }
          ]
        },
        "description": "This request uses the saved `token` collection variable to access a secret 'name' stored against that token.\n\nIn this request, we used the `token` collection variable as a query param to fetch the name generated for that token. We have added a test to check that a name is correctly returned."
      },
      "response": []
    },
    {
      "name": "Distance Only",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Sorted by distance, rating, price, name\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    for (let i = 1; i < data.length; i++) {\r",
              "        const prev = data[i - 1];\r",
              "        const curr = data[i];\r",
              "\r",
              "        if (prev.distance !== curr.distance) {\r",
              "            pm.expect(curr.distance).to.be.at.least(prev.distance);\r",
              "        } \r",
              "        else if (prev.customerRating !== curr.customerRating) {\r",
              "            pm.expect(curr.customerRating).to.be.at.most(prev.customerRating);\r",
              "        } \r",
              "        else if (prev.priceSinglePersonSpent !== curr.priceSinglePersonSpent) {\r",
              "            pm.expect(curr.priceSinglePersonSpent).to.be.at.least(prev.priceSinglePersonSpent);\r",
              "        } \r",
              "        else {\r",
              "            pm.expect(curr.restaurantName.localeCompare(prev.restaurantName))\r",
              "              .to.be.at.least(0);\r",
              "        }\r",
              "    }\r",
              "});\r",
              "\r",
              "pm.test(\"Each item has required fields\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    data.forEach(r => {\r",
              "        pm.expect(r).to.have.property(\"restaurantName\");\r",
              "        pm.expect(r).to.have.property(\"cuisineName\");\r",
              "        pm.expect(r).to.have.property(\"priceSinglePersonSpent\");\r",
              "        pm.expect(r).to.have.property(\"customerRating\");\r",
              "        pm.expect(r).to.have.property(\"distance\");\r",
              "    });\r",
              "});\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ]
        }
      },
      "response": []
    },
    {
      "name": "No match",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"It should be empty\", () => {\r",
              "    const data = pm.response.json();\r",
              "    pm.expect(data.length).to.be.at.most(0);\r",
              "});\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?restaurantName=XXX",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "restaurantName",
              "value": "XXX"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Not valid big price",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Price validation error returned\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json).to.have.property(\"price\");\r",
              "    pm.expect(json.price).to.include(\"at most 50\");\r",
              "});\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?price=60",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "price",
              "value": "60"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Not valid low price",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Price validation error returned\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json).to.have.property(\"price\");\r",
              "    pm.expect(json.price).to.include(\"at least 10\");\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?price=0",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "price",
              "value": "0"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Price only",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Sorted by distance, rating, price, name\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    for (let i = 1; i < data.length; i++) {\r",
              "        const prev = data[i - 1];\r",
              "        const curr = data[i];\r",
              "\r",
              "        if (prev.distance !== curr.distance) {\r",
              "            pm.expect(curr.distance).to.be.at.least(prev.distance);\r",
              "        } \r",
              "        else if (prev.customerRating !== curr.customerRating) {\r",
              "            pm.expect(curr.customerRating).to.be.at.most(prev.customerRating);\r",
              "        } \r",
              "        else if (prev.priceSinglePersonSpent !== curr.priceSinglePersonSpent) {\r",
              "            pm.expect(curr.priceSinglePersonSpent).to.be.at.least(prev.priceSinglePersonSpent);\r",
              "        } \r",
              "        else {\r",
              "            pm.expect(curr.restaurantName.localeCompare(prev.restaurantName))\r",
              "              .to.be.at.least(0);\r",
              "        }\r",
              "    }\r",
              "});\r",
              "\r",
              "pm.test(\"Each item has required fields and price at most 30\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    data.forEach(r => {\r",
              "        pm.expect(r).to.have.property(\"restaurantName\");\r",
              "        pm.expect(r).to.have.property(\"cuisineName\");\r",
              "        pm.expect(r).to.have.property(\"priceSinglePersonSpent\");\r",
              "        pm.expect(r).to.have.property(\"customerRating\");\r",
              "        pm.expect(r).to.have.property(\"distance\");\r",
              "        pm.expect(r.distance).to.be.at.most(30);\r",
              "    });\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?price=30",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "price",
              "value": "30"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Cuisine name only",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Sorted by distance, rating, price, name\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    for (let i = 1; i < data.length; i++) {\r",
              "        const prev = data[i - 1];\r",
              "        const curr = data[i];\r",
              "\r",
              "        if (prev.distance !== curr.distance) {\r",
              "            pm.expect(curr.distance).to.be.at.least(prev.distance);\r",
              "        } \r",
              "        else if (prev.customerRating !== curr.customerRating) {\r",
              "            pm.expect(curr.customerRating).to.be.at.most(prev.customerRating);\r",
              "        } \r",
              "        else if (prev.priceSinglePersonSpent !== curr.priceSinglePersonSpent) {\r",
              "            pm.expect(curr.priceSinglePersonSpent).to.be.at.least(prev.priceSinglePersonSpent);\r",
              "        } \r",
              "        else {\r",
              "            pm.expect(curr.restaurantName.localeCompare(prev.restaurantName))\r",
              "              .to.be.at.least(0);\r",
              "        }\r",
              "    }\r",
              "});\r",
              "\r",
              "pm.test(\"Each item has required fields and cusine name must be Italian\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    data.forEach(r => {\r",
              "        pm.expect(r).to.have.property(\"restaurantName\");\r",
              "        pm.expect(r).to.have.property(\"cuisineName\");\r",
              "        pm.expect(r).to.have.property(\"priceSinglePersonSpent\");\r",
              "        pm.expect(r).to.have.property(\"customerRating\");\r",
              "        pm.expect(r).to.have.property(\"distance\");\r",
              "        pm.expect(r.cuisineName).to.equal(\"Italian\");\r",
              "    });\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?cuisineName=Italian",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "cuisineName",
              "value": "Italian"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Not valid distance",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Price validation error returned\", () => {\r",
              "    const json = pm.response.json();\r",
              "    pm.expect(json).to.have.property(\"distance\");\r",
              "    pm.expect(json.distance).to.include(\"at most 10\");\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?distance=70",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "distance",
              "value": "70"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Restaurant Name Only",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Sorted by distance, rating, price, name\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    for (let i = 1; i < data.length; i++) {\r",
              "        const prev = data[i - 1];\r",
              "        const curr = data[i];\r",
              "\r",
              "        if (prev.distance !== curr.distance) {\r",
              "            pm.expect(curr.distance).to.be.at.least(prev.distance);\r",
              "        } \r",
              "        else if (prev.customerRating !== curr.customerRating) {\r",
              "            pm.expect(curr.customerRating).to.be.at.most(prev.customerRating);\r",
              "        } \r",
              "        else if (prev.priceSinglePersonSpent !== curr.priceSinglePersonSpent) {\r",
              "            pm.expect(curr.priceSinglePersonSpent).to.be.at.least(prev.priceSinglePersonSpent);\r",
              "        } \r",
              "        else {\r",
              "            pm.expect(curr.restaurantName.localeCompare(prev.restaurantName))\r",
              "              .to.be.at.least(0);\r",
              "        }\r",
              "    }\r",
              "});\r",
              "\r",
              "pm.test(\"Each item has required fields and restaurant name should have Delicious\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    data.forEach(r => {\r",
              "        pm.expect(r).to.have.property(\"restaurantName\");\r",
              "        pm.expect(r).to.have.property(\"cuisineName\");\r",
              "        pm.expect(r).to.have.property(\"priceSinglePersonSpent\");\r",
              "        pm.expect(r).to.have.property(\"customerRating\");\r",
              "        pm.expect(r).to.have.property(\"distance\");\r",
              "        pm.expect(r.restaurantName).to.include(\"Delicious\");\r",
              "    });\r",
              "});"
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?restaurantName=Delicious",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "restaurantName",
              "value": "Delicious"
            }
          ]
        }
      },
      "response": []
    },
    {
      "name": "Price, Distance and Rating",
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test(\"Sorted by distance, rating, price, name\", () => {\r",
              "\r",
              "    \r",
              "    for (let i = 1; i < data.length; i++) {\r",
              "        const prev = data[i - 1];\r",
              "        const curr = data[i];\r",
              "\r",
              "        if (prev.distance !== curr.distance) {\r",
              "            pm.expect(curr.distance).to.be.at.least(prev.distance);\r",
              "        } \r",
              "        else if (prev.customerRating !== curr.customerRating) {\r",
              "            pm.expect(curr.customerRating).to.be.at.most(prev.customerRating);\r",
              "        } \r",
              "        else if (prev.priceSinglePersonSpent !== curr.priceSinglePersonSpent) {\r",
              "            pm.expect(curr.priceSinglePersonSpent).to.be.at.least(prev.priceSinglePersonSpent);\r",
              "        } \r",
              "        else {\r",
              "            pm.expect(curr.restaurantName.localeCompare(prev.restaurantName))\r",
              "              .to.be.at.least(0);\r",
              "        }\r",
              "    }\r",
              "});\r",
              "\r",
              "pm.test(\"Each item has required fields and match filters\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    data.forEach(r => {\r",
              "        pm.expect(r).to.have.property(\"restaurantName\");\r",
              "        pm.expect(r).to.have.property(\"cuisineName\");\r",
              "        pm.expect(r).to.have.property(\"priceSinglePersonSpent\");\r",
              "        pm.expect(r).to.have.property(\"customerRating\");\r",
              "        pm.expect(r).to.have.property(\"distance\");\r",
              "\r",
              "        pm.expect(r.distance).to.be.lessThanOrEqual(8);\r",
              "        pm.expect(r.priceSinglePersonSpent).to.be.lessThanOrEqual(30);\r",
              "        pm.expect(r.customerRating).to.be.greaterThanOrEqual(3)\r",
              "    });\r",
              "});\r",
              "\r",
              "pm.test(\"should match filters\", () => {\r",
              "    const data = pm.response.json();\r",
              "\r",
              "    data.forEach(r => {\r",
              "        pm.expect(r.distance).to.be.lessThanOrEqual(8);\r",
              "        pm.expect(r.priceSinglePersonSpent).to.be.lessThanOrEqual(30);\r",
              "        pm.expect(r.customerRating).to.be.greaterThanOrEqual(3)\r",
              "    });\r",
              "});\r",
              "\r",
              "\r",
              "\r",
              "\r",
              "\r",
              "\r",
              ""
            ],
            "type": "text/javascript",
            "packages": {},
            "requests": {}
          }
        }
      ],
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/api/restaurants?distance=8&price=30&customerRating=3",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "8080",
          "path": [
            "api",
            "restaurants"
          ],
          "query": [
            {
              "key": "distance",
              "value": "8"
            },
            {
              "key": "price",
              "value": "30"
            },
            {
              "key": "customerRating",
              "value": "3"
            }
          ]
        }
      },
      "response": []
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "token",
      "value": ""
    },
    {
      "key": "baseUrl",
      "value": "https://postman-integration-testing.glitch.me/"
    }
  ]
}